<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>aria_qs_mzda_intddr_sk_meb2_tm5000_freertos.X</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '00093.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="00462.html" target="topic">MPLAB® Harmony Graphics Suite</a> &gt; <a href="00728.html" target="topic">Examples and Demonstrations</a> &gt; <a href="00727.html" target="topic">Aria Applications</a> &gt; <a href="00029.html" target="topic">aria_quickstart</a> &gt; <a href="00093.html" target="topic">aria_qs_mzda_intddr_sk_meb2_tm5000_freertos.X</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB® Harmony Graphics Suite</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00462.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="00092.html" target="topic">Previous</a> | <a href="00029.html" target="topic">Up</a> | <a href="00094.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: aria_qs_mzda_intddr_sk_meb2_tm5000_freertos.X Topic Title: aria_qs_mzda_intddr_sk_meb2_tm5000_freertos.X)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
aria_qs_mzda_intddr_sk_meb2_tm5000_freertos.X</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
 &nbsp;</p>
<p class="Element10">
This demonstration serves as a preconfigured starting point for a touch-enabled application powered by the Aria User Interface Library. The design contains an image widget, a label widget and a button widget.&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element15">
Defining the Architecture</div>
<p class="Element10" style="text-align: center;">
<img src="glcd_rgba8888_mxt_mzda_extddr_sk_freertos_wvga.png" border="0" alt="" title=""></p><p class="Element10">
The application uses the Graphics Library to render graphics to the display. The Aria Graphics Library runs as stand-alone task, fully-blocking and waiting for events from external tasks like system service task or the application task. Thread-safe APIs for sending events to the Aria task are provided by the Aria RTOS extension library. The Graphics library passes draw commands into the GPU Library, which in turn draws the widgets and images to the frame buffer stored in the DDR memory. Via the DDR2 Memory Controller, the GLCD display controller peripheral continuously transfers frame data from the frame buffers onto the LCD display.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The application also features user touch input through the integrated touch screen on the display panel. Touch input from the touch controller travels through the I2C port, and the Input System Service acquires the touch input information from the touch and I2C drivers. The Input System Service sends touch events to the Graphics library which processes these events and updates the frame data accordingly.&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element15">
Demonstration Features</div>

<ul class="Element630">
<li class="Element600">FreeRTOS and Aria Graphics Library with RTOS extensions</li>
<li class="Element600">GLCD display controller and NANO 2D GPU</li>
<li class="Element600">32-bit RGBA Color Mode Frame Buffer in DDR memory</li>
<li class="Element600">Input system service and touch driver</li>
<li class="Element600">Time system service, timer-counter peripheral library and driver</li>
<li class="Element600">RLE compressed RGB image in internal flash</li>
<li class="Element600">800x480 WVGA display resolution</li>
</ul><p class="Element10">
&nbsp;</p>
<div class="Element15">
Creating the Project</div>
<p class="Element10" style="text-align: center;">
<img src="glcd_rgba8888_mxt_mzda_extddr_sk_freertos_wvga_pg.png" border="0" alt="" title=""></p><p class="Element10">
The Project Graph diagram shows the Harmony components that are included in this application. Lines between components are drawn to satisfy components that depend on a capability that another component provides.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Adding the “PIC32MZ DA Starter Kit BSP” and “Aria Graphics w/ PDA TM5000 Display” Graphics Template component into the project graph will automatically add the components needed for a graphics project and resolve their dependencies. It will also configure the pins needed to drive the external peripherals like the display and the touch controller.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The FreeRTOS component is manually added to configure Harmony with FreeRTOS. Once FreeRTOS is added, the Aria Graphics RTOS extensions are automatically enabled.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
To optimize RTOS for graphics, set Task Priority at 2 or higher. The Harmony Core Application is also configured to use a Task Delay of 10ms to allow other tasks to execute. </p><p class="Element10" style="text-align: center;">
<img src="APPS GFX confdiag_e70_freertos_setting.png" border="0" alt="" title=""></p><p class="Element10">
&nbsp;</p>
<p class="Element10">
Set the Heap Size to 32768 bytes. The heap is set in Device &amp; Project Configuration -&gt; Project Configuration -&gt; XC32 (Global Options) xc32-ld -&gt; General -&gt; Heap Size option in the “System” component.&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="APPS GFX confdiag_e70_freertos_heap.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><div class="Element15">
Building the Application</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The parent directory for this application is gfx/apps/aria_quickstart. To build this application, open the gfx/apps/aria_quickstart/firmware/aria_qs_mzda_intddr_sk_meb2_tm5000_freertos.X project file.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The following table lists configuration properties: </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table2">
<tr>
<td class="Element65" valign="top" width="25%">
<div class="Element66">
Project Name&nbsp;</div></td><td class="Element65" valign="top" width="12%">
<div class="Element66">
BSP Used&nbsp;</div></td><td class="Element65" valign="top" width="24%">
<div class="Element66">
Graphics Template Used&nbsp;</div></td><td class="Element65" valign="top" width="38%">
<div class="Element66">
Description&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="25%">
<div class="Element68">
aria_qs_mzda_intddr_sk_meb2_tm5000_freertos.X&nbsp;</div></td><td class="Element67" valign="top" width="12%">
<div class="Element68">
PIC32MZ DA Starter Kit&nbsp;</div></td><td class="Element67" valign="top" width="24%">
<div class="Element68">
Aria Graphics w/ PDA TM5000 Display&nbsp;</div></td><td class="Element67" valign="top" width="38%">
<div class="Element68">
Aria GFX on PIC32MZ DA with internal DDR Starter Kit, MEBII and PDA TM5000 Display&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
&nbsp;</p>
<div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Important Star.png" border="0" alt="" title=""><strong> Important!</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
This application may contain custom code that is marked by the comments <span class="Element146">// START OF CUSTOM CODE ...</span> and <span class="Element146">// END OF CUSTOM CODE</span>. When using the MPLAB Harmony Configurator to regenerate the application code, use the &quot;ALL&quot; merging strategy and <i>do not</i> remove or replace the custom code.&nbsp;</div></td></tr></table></div></div>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<div class="Element15">
Configuring the Hardware</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
On the MEB II, the EBIOE and LCD_PCLK (J9) must be jumpered. A connection establishes the GLCD's pixel clock output timing. The external SRAM memory on the board is disabled. The J9 jumper is located on the bottom of the MEB II board, beneath where the starter kit is plugged into the board. Refer to the following figure for the exact location.&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="mzda_sk_intddr_wqvga_hardware.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><p class="Element10">
Connect the PIC32MZ DA Starter Kit to the MEB II board&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="mzda_sk_intddr_wqvga_hardware2.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
Power up the board by connecting the power adapter to J3 power connector on the MEB II board or a powered USB cable to the USB DEBUG&nbsp;</p>
<p class="Element10">
port on the Starter Kit board </p><p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><div class="Element15">
Running the Demonstration</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="aria_quickstart_screen.png" border="0" alt="" title=""></p><p class="Element10">
&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
When <strong>Make changes. Generate. Run.</strong> is touched, the button will toggle with each individual touch. </p><p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="aria_quickstart_screen_pressed.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="00462.html" target="topic">MPLAB® Harmony Graphics Suite</a> &gt; <a href="00728.html" target="topic">Examples and Demonstrations</a> &gt; <a href="00727.html" target="topic">Aria Applications</a> &gt; <a href="00029.html" target="topic">aria_quickstart</a> &gt; <a href="00093.html" target="topic">aria_qs_mzda_intddr_sk_meb2_tm5000_freertos.X</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB® Harmony Graphics Suite</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00462.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="00092.html" target="topic">Previous</a> | <a href="00029.html" target="topic">Up</a> | <a href="00094.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: aria_qs_mzda_intddr_sk_meb2_tm5000_freertos.X Topic Title: aria_qs_mzda_intddr_sk_meb2_tm5000_freertos.X)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>